<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Computer Vision Lab</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: #f0f4f7;
        margin: 0;
        padding: 0;
        text-align: center;
      }
      header {
        background: #004aad;
        color: white;
        padding: 1rem;
      }
      .container {
        margin-top: 50px;
      }
      .module {
        background: white;
        border-radius: 15px;
        width: 60%;
        margin: 20px auto;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
      }
      .module-title {
        background: #007bff;
        color: white;
        font-size: 20px;
        padding: 15px;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
      }
      .module-title:hover {
        background: #0056b3;
        transform: scale(1.03);
      }
      .module-content {
        display: none;
        margin-top: 20px;
        animation: fadeIn 0.4s ease;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      button {
        padding: 12px 25px;
        margin: 10px;
        font-size: 17px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.3s;
      }
      button:hover {
        background: #0056b3;
        transform: scale(1.05);
      }
    </style>
    <script>
      function toggleModule(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === "block" ? "none" : "block";
      }
    </script>
  </head>

  <body>
    <header>
      <h1>Computer Vision Toolkit</h1>
    </header>

    <!-- Cloud Mode Banner -->
    <div id="cloud-banner" style="display:none; background:#ff9800; color:white; padding:10px; text-align:center;">
      â˜ï¸ <strong>Cloud Mode:</strong> Webcam features (Marker/Markerless tracking, Pose tracking) require local deployment. 
      <a href="https://github.com/YOUR_USERNAME/computer_vision_toolkit" style="color:white;">Clone & run locally</a> for full features.
    </div>

    <script>
      // Check if running on cloud and show banner
      fetch('/api/status')
        .then(res => res.json())
        .then(data => {
          if (data.is_cloud) {
            document.getElementById('cloud-banner').style.display = 'block';
          }
        })
        .catch(() => {});
    </script>

    <div class="container">
      <h2>Select a Module</h2>

      <!-- MODULE 1 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module1')">
          ğŸ§© Module 1: Camera Calibration & Projection
        </div>
        <div class="module-content" id="module1">
          <form action="{{ url_for('perspective_projection') }}">
            <button type="submit">ğŸ“ Perspective Projection</button>
          </form>
        </div>
      </div>

      <!-- MODULE 2 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module2')">
          âš™ï¸ Module 2: Image Processing & Detection
        </div>
        <div class="module-content" id="module2">
          <form action="{{ url_for('gaussian_blur_nd_fourier_transform') }}">
            <button type="submit">ğŸ” Gaussian Blur & Fourier Transform</button>
          </form>

          <form action="{{ url_for('template_matching') }}">
            <button type="submit">ğŸ¯ Template Matching</button>
          </form>
        </div>
      </div>

      <!-- MODULE 3 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module3')">
          ğŸ§  Module 3: Gradient & Laplacian of Gaussian
        </div>
        <div class="module-content" id="module3">
          <form action="{{ url_for('gradient_and_log') }}">
            <button type="submit">
              ğŸ“ˆ Gradient Images & Laplacian of Gaussian
            </button>
          </form>
          <form action="{{ url_for('double_threshold_edges') }}">
            <button type="submit">
              ğŸ§® Manual Edge Detection (Double Thresholding)
            </button>
          </form>
          <form action="{{ url_for('manual_corners') }}">
            <button type="submit">ğŸ”´ Manual Corner Detection</button>
          </form>
          <form action="{{ url_for('boundary_detection') }}">
            <button type="submit">
              ğŸ§© Boundary Detection (Select Object ROI)
            </button>
          </form>
          <form action="{{ url_for('aruco_segmentation') }}">
            <button type="submit">ğŸ§© ArUco-Based Object Segmentation</button>
          </form>
        </div>
      </div>

      <!-- MODULE 4 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module4')">
          ğŸŒ„ Module 4: Image Stitching (Panorama Creation)
        </div>
        <div class="module-content" id="module4">
          <form action="{{ url_for('image_stitching') }}">
            <button type="submit">ğŸ§µ Image Stitching Experiment</button>
          </form>
          <form action="{{ url_for('sift_feature_matching') }}">
            <button type="submit">ğŸ” SIFT Feature Extraction + RANSAC</button>
          </form>
        </div>
      </div>

      <!-- MODULE 5 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module5')">
          ğŸ¥ Module 5-6 : Real-Time Object Tracking
        </div>
        <div class="module-content" id="module5">
          <form action="{{ url_for('module5_marker') }}">
            <button type="submit">ğŸ“¦ Marker-Based Tracking (QR/Aruco)</button>
          </form>

          <form action="{{ url_for('module5_markerless') }}">
            <button type="submit">ğŸ¯ Markerless Tracking</button>
          </form>

          <form action="{{ url_for('module5_sam2') }}">
            <button type="submit">ğŸ§  SAM2 Segmentation Tracking</button>
          </form>
        </div>
      </div>

      <!-- MODULE 7 -->
      <div class="module">
        <div class="module-title" onclick="toggleModule('module7')">
          ğŸ“ Module 7: Stereo-Based Object Size Estimation
        </div>
        <div class="module-content" id="module7">
          <form action="{{ url_for('stereo_calibration') }}">
            <button type="submit">ğŸ¯ Stereo Calibration (Generate .npz)</button>
          </form>

          <form action="{{ url_for('stereo_size_estimation') }}">
            <button type="submit">ğŸ“ Stereo Object Size Measurement</button>
          </form>

          <!-- â• NEW: Pose & Hand Tracking -->
          <form action="{{ url_for('pose_hand_tracking') }}">
            <button type="submit">ğŸ§â€â™€ï¸ Real-Time Pose & Hand Tracking</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
